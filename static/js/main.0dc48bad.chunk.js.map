{"version":3,"sources":["Square.js","index.js"],"names":["Square","className","this","props","on","some","o","posX","posY","red","onClick","Component","Game","handleKeyDown","bind","state","direction","Math","floor","random","disabled","score","setState","prevState","localStorage","getItem","setItem","x","y","disable","handleScoreChange","addPosFromOppDirection","includes","addPosFromDirection","e","length","addPos","Error","addOpPos","slice","keyCode","changeDirection","setTimeout","timeout","document","addEventListener","removeOldestPos","items","i","push","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0dc48bad.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nexport default class Square extends Component {\r\n  render() {\r\n    return (\r\n      <div\r\n        className={\r\n          this.props.on.some(\r\n            (o) => o.posX === this.props.posX && o.posY === this.props.posY\r\n          )\r\n            ? \"dark\"\r\n            : this.props.red[0] === this.props.posX &&\r\n              this.props.red[1] === this.props.posY\r\n            ? \"red\"\r\n            : \"box\"\r\n        }\r\n        onClick={this.props.onClick}\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Square from \"./Square\";\r\nimport \"./index.css\";\r\n\r\nclass Game extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.state = {\r\n      on: [\r\n        {\r\n          posX: 4,\r\n          posY: 5,\r\n          direction: 0,\r\n        },\r\n        {\r\n          posX: 4,\r\n          posY: 4,\r\n          direction: 0,\r\n        },\r\n      ],\r\n      red: [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)],\r\n      direction: 0,\r\n      disabled: false,\r\n      score: 0,\r\n    };\r\n  }\r\n\r\n  handleScoreChange() {\r\n    this.setState((prevState) => ({\r\n      score: prevState.score + 1,\r\n    }));\r\n    if (\r\n      !localStorage.getItem(\"score\") ||\r\n      localStorage.getItem(\"score\") < this.state.score\r\n    )\r\n      localStorage.setItem(\"score\", this.state.score);\r\n  }\r\n\r\n  addPos(x, y) {\r\n    if (x === -1 || x === 9 || y === -1 || y === 9) {\r\n      return this.disable();\r\n    }\r\n    if (this.state.red[0] === x && this.state.red[1] === y) {\r\n      this.handleScoreChange();\r\n      return this.addPosFromOppDirection();\r\n    }\r\n    if (this.includes(x, y)) return this.disable();\r\n    if (this.state.disabled === true) return;\r\n    this.setState((prevState) => ({\r\n      on: [\r\n        ...prevState.on,\r\n        { posX: x, posY: y, direction: this.state.direction },\r\n      ],\r\n    }));\r\n  }\r\n\r\n  addOpPos(x, y) {\r\n    if (x === -1 || x === 9 || y === -1 || y === 9) {\r\n      return this.disable();\r\n    }\r\n    this.setState({\r\n      red: [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)],\r\n    });\r\n    this.setState((prevState) => ({\r\n      on: [\r\n        { posX: x, posY: y, direction: this.state.direction },\r\n        ...prevState.on,\r\n      ],\r\n    }));\r\n    this.addPosFromDirection();\r\n  }\r\n\r\n  includes(x, y) {\r\n    // this.props.on.some(\r\n    //   (o) => o.posX === this.props.posX && o.posY === this.props.posY\r\n    // )\r\n    if (this.state.on.some((e) => e.posX === x && e.posY === y)) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  disable() {\r\n    this.setState({\r\n      disabled: true,\r\n    });\r\n  }\r\n\r\n  addPosFromDirection() {\r\n    const x = this.state.on[this.state.on.length - 1];\r\n    switch (this.state.direction) {\r\n      case 0:\r\n        this.addPos(x.posX, x.posY - 1);\r\n        break;\r\n      case 1:\r\n        this.addPos(x.posX + 1, x.posY);\r\n        break;\r\n      case 2:\r\n        this.addPos(x.posX, x.posY + 1);\r\n        break;\r\n      case 3:\r\n        this.addPos(x.posX - 1, x.posY);\r\n        break;\r\n      default:\r\n        return new Error(\"There is no direction in the state\");\r\n    }\r\n  }\r\n\r\n  addPosFromOppDirection() {\r\n    const x = this.state.on[0];\r\n    switch (x.direction) {\r\n      case 0:\r\n        this.addOpPos(x.posX, x.posY + 1);\r\n        break;\r\n      case 1:\r\n        this.addOpPos(x.posX - 1, x.posY);\r\n        break;\r\n      case 2:\r\n        this.addOpPos(x.posX, x.posY - 1);\r\n        break;\r\n      case 3:\r\n        this.addOpPos(x.posX + 1, x.posY);\r\n        break;\r\n      default:\r\n        return new Error(\"There is no direction in the state\");\r\n    }\r\n  }\r\n\r\n  removeOldestPos() {\r\n    if (this.state.disabled === true) return;\r\n    this.setState((prevState) => ({\r\n      on: [...prevState.on.slice(1)],\r\n    }));\r\n  }\r\n\r\n  changeDirection(e) {\r\n    this.setState((prevState) => ({\r\n      direction: (prevState.direction + e) % 4,\r\n    }));\r\n  }\r\n\r\n  handleKeyDown(e) {\r\n    // if (this.state.disabled === true) return;\r\n    switch (e.keyCode) {\r\n      case 37: // left / a\r\n      case 65:\r\n        if (this.state.direction === 0 || this.state.direction === 2)\r\n          this.changeDirection(this.state.direction === 0 ? 3 : 1);\r\n        break;\r\n      case 38: // up / w\r\n      case 87:\r\n        if (this.state.direction === 3 || this.state.direction === 1)\r\n          this.changeDirection(this.state.direction === 3 ? 1 : 3);\r\n        break;\r\n      case 39: // right / d\r\n      case 68:\r\n        if (this.state.direction === 0 || this.state.direction === 2)\r\n          this.changeDirection(this.state.direction === 0 ? 1 : 3);\r\n        break;\r\n      case 40: // down / s\r\n      case 83:\r\n        if (this.state.direction === 3 || this.state.direction === 1)\r\n          this.changeDirection(this.state.direction === 3 ? 3 : 1);\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => this.timeout(), 100);\r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  timeout() {\r\n    if (this.state.disabled === true) return;\r\n    this.addPosFromDirection();\r\n    this.removeOldestPos();\r\n    setTimeout(() => this.timeout(), 175);\r\n  }\r\n\r\n  render() {\r\n    const items = [];\r\n    for (let i = 0; i < 9; i++) {\r\n      for (let e = 0; e < 9; e++) {\r\n        items.push(\r\n          <Square posX={e} posY={i} on={this.state.on} red={this.state.red} />\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"game\">\r\n        Score {this.state.score}\r\n        <br />\r\n        High Score {localStorage.getItem(\"score\") || this.state.score}\r\n        <div className=\"layout\">\r\n          <div className=\"game-board\">{items}</div>\r\n          <div\r\n            className={\r\n              this.state.disabled === true ? \"text-block1\" : \"text-block\"\r\n            }\r\n          >\r\n            <p>You died L</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nReactDOM.render(<Game />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}
{"version":3,"sources":["Square.js","index.js"],"names":["Square","className","this","props","on","some","o","posX","posY","red","onClick","Component","Game","handleKeyDown","bind","state","direction","disabled","score","e","Math","floor","random","getRandomPos","setState","prevState","localStorage","getItem","setItem","x","y","disable","handleScoreChange","addPosFromOppDirection","includes","addPosFromDirection","length","addPos","Error","addOpPos","slice","keyCode","changeDirection","setTimeout","timeout","document","addEventListener","removeOldestPos","console","log","items","i","push","type","restart","ReactDOM","render","getElementById"],"mappings":"+MAEqBA,E,4JACpB,WAAU,IAAD,OACR,OACC,qBACCC,UACCC,KAAKC,MAAMC,GAAGC,MACb,SAAAC,GAAC,OAAIA,EAAEC,OAAS,EAAKJ,MAAMI,MAAQD,EAAEE,OAAS,EAAKL,MAAMK,QAEvD,OACAN,KAAKC,MAAMM,IAAI,KAAOP,KAAKC,MAAMI,MACjCL,KAAKC,MAAMM,IAAI,KAAOP,KAAKC,MAAMK,KACjC,MACA,MAEJE,QAASR,KAAKC,MAAMO,c,GAdYC,aCG9BC,G,wDACL,WAAYT,GAAQ,IAAD,8BAClB,cAAMA,IACDU,cAAgB,EAAKA,cAAcC,KAAnB,gBACrB,EAAKC,MAAQ,CACZX,GAAI,CACH,CACCG,KAAM,EACNC,KAAM,EACNQ,UAAW,GAEZ,CACCT,KAAM,EACNC,KAAM,EACNQ,UAAW,IAGbP,IAAK,GACLO,UAAW,EACXC,UAAU,EACVC,MAAO,GAnBU,E,gDAuBnB,WACC,IAAMC,EAAI,CAACC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAgBF,KAAKC,MAAsB,GAAhBD,KAAKE,WAC3D,OAAIpB,KAAKa,MAAMX,GAAGC,MAAK,SAAAC,GAAC,OAAIA,EAAEC,OAASY,EAAE,IAAMb,EAAEE,OAASW,EAAE,MACpDjB,KAAKqB,eACNJ,I,+BAGR,WACCjB,KAAKsB,UAAS,SAAAC,GAAS,MAAK,CAC3BP,MAAOO,EAAUP,MAAQ,QAGxBQ,aAAaC,QAAQ,UACtBD,aAAaC,QAAQ,SAAWzB,KAAKa,MAAMG,QAE3CQ,aAAaE,QAAQ,QAAS1B,KAAKa,MAAMG,S,oBAG3C,SAAOW,EAAGC,GAAI,IAAD,OACZ,OAAW,IAAPD,GAAkB,KAANA,IAAmB,IAAPC,GAAkB,KAANA,EAChC5B,KAAK6B,UAET7B,KAAKa,MAAMN,IAAI,KAAOoB,GAAK3B,KAAKa,MAAMN,IAAI,KAAOqB,GACpD5B,KAAK8B,oBACE9B,KAAK+B,0BAET/B,KAAKgC,SAASL,EAAGC,GAAW5B,KAAK6B,gBACT,IAAxB7B,KAAKa,MAAME,UACff,KAAKsB,UAAS,SAAAC,GAAS,MAAK,CAC3BrB,GAAG,GAAD,mBACEqB,EAAUrB,IADZ,CAED,CAAEG,KAAMsB,EAAGrB,KAAMsB,EAAGd,UAAW,EAAKD,MAAMC,oB,sBAK7C,SAASa,EAAGC,GAAI,IAAD,OACd,IAAW,IAAPD,GAAkB,KAANA,IAAmB,IAAPC,GAAkB,KAANA,EACvC,OAAO5B,KAAK6B,UAEb7B,KAAKsB,SAAS,CACbf,IAAK,CAACW,KAAKC,MAAsB,GAAhBD,KAAKE,UAAgBF,KAAKC,MAAsB,GAAhBD,KAAKE,aAEvDpB,KAAKsB,UAAS,SAAAC,GAAS,MAAK,CAC3BrB,GAAG,CACF,CAAEG,KAAMsB,EAAGrB,KAAMsB,EAAGd,UAAW,EAAKD,MAAMC,YADzC,mBAEES,EAAUrB,SAGfF,KAAKiC,wB,sBAGN,SAASN,EAAGC,GACX,GAAI5B,KAAKa,MAAMX,GAAGC,MAAK,SAAAc,GAAC,OAAIA,EAAEZ,OAASsB,GAAKV,EAAEX,OAASsB,KACtD,OAAO,I,qBAIT,WACC5B,KAAKsB,SAAS,CACbP,UAAU,M,iCAIZ,WACC,IAAMY,EAAI3B,KAAKa,MAAMX,GAAGF,KAAKa,MAAMX,GAAGgC,OAAS,GAC/C,OAAQlC,KAAKa,MAAMC,WAClB,KAAK,EACJd,KAAKmC,OAAOR,EAAEtB,KAAMsB,EAAErB,KAAO,GAC7B,MACD,KAAK,EACJN,KAAKmC,OAAOR,EAAEtB,KAAO,EAAGsB,EAAErB,MAC1B,MACD,KAAK,EACJN,KAAKmC,OAAOR,EAAEtB,KAAMsB,EAAErB,KAAO,GAC7B,MACD,KAAK,EACJN,KAAKmC,OAAOR,EAAEtB,KAAO,EAAGsB,EAAErB,MAC1B,MACD,QACC,OAAO,IAAI8B,MAAM,yC,oCAIpB,WACC,IAAMT,EAAI3B,KAAKa,MAAMX,GAAG,GACxB,OAAQyB,EAAEb,WACT,KAAK,EACJd,KAAKqC,SAASV,EAAEtB,KAAMsB,EAAErB,KAAO,GAC/B,MACD,KAAK,EACJN,KAAKqC,SAASV,EAAEtB,KAAO,EAAGsB,EAAErB,MAC5B,MACD,KAAK,EACJN,KAAKqC,SAASV,EAAEtB,KAAMsB,EAAErB,KAAO,GAC/B,MACD,KAAK,EACJN,KAAKqC,SAASV,EAAEtB,KAAO,EAAGsB,EAAErB,MAC5B,MACD,QACC,OAAO,IAAI8B,MAAM,yC,6BAIpB,YAC6B,IAAxBpC,KAAKa,MAAME,UACff,KAAKsB,UAAS,SAAAC,GAAS,MAAK,CAC3BrB,GAAG,YAAKqB,EAAUrB,GAAGoC,MAAM,U,6BAI7B,SAAgBrB,GACfjB,KAAKsB,UAAS,SAAAC,GAAS,MAAK,CAC3BT,WAAYS,EAAUT,UAAYG,GAAK,Q,2BAIzC,SAAcA,GAEb,OAAQA,EAAEsB,SACT,KAAK,GACL,KAAK,GACyB,IAAzBvC,KAAKa,MAAMC,WAA4C,IAAzBd,KAAKa,MAAMC,WAC5Cd,KAAKwC,gBAAyC,IAAzBxC,KAAKa,MAAMC,UAAkB,EAAI,GACvD,MACD,KAAK,GACL,KAAK,GACyB,IAAzBd,KAAKa,MAAMC,WAA4C,IAAzBd,KAAKa,MAAMC,WAC5Cd,KAAKwC,gBAAyC,IAAzBxC,KAAKa,MAAMC,UAAkB,EAAI,GACvD,MACD,KAAK,GACL,KAAK,GACyB,IAAzBd,KAAKa,MAAMC,WAA4C,IAAzBd,KAAKa,MAAMC,WAC5Cd,KAAKwC,gBAAyC,IAAzBxC,KAAKa,MAAMC,UAAkB,EAAI,GACvD,MACD,KAAK,GACL,KAAK,GACyB,IAAzBd,KAAKa,MAAMC,WAA4C,IAAzBd,KAAKa,MAAMC,WAC5Cd,KAAKwC,gBAAyC,IAAzBxC,KAAKa,MAAMC,UAAkB,EAAI,GACvD,MACD,QACC,U,+BAIH,WAAqB,IAAD,OACnBd,KAAKsB,SAAS,CACbf,IAAKP,KAAKqB,iBAEXoB,YAAW,kBAAM,EAAKC,YAAW,KACjCC,SAASC,iBAAiB,UAAW5C,KAAKW,iB,qBAG3C,WAAW,IAAD,QACmB,IAAxBX,KAAKa,MAAME,WACff,KAAKiC,sBACLjC,KAAK6C,kBACLJ,YAAW,kBAAM,EAAKC,YAAW,Q,qBAGlC,WAAW,IAAD,OACTI,QAAQC,IAAI,eACU,IAAlB/C,KAAKe,WACT+B,QAAQC,IAAI/C,KAAKa,OACjBb,KAAKsB,SACJ,CACCpB,GAAI,CACH,CACCG,KAAM,EACNC,KAAM,EACNQ,UAAW,GAEZ,CACCT,KAAM,EACNC,KAAM,EACNQ,UAAW,IAGbP,IAAK,CAACW,KAAKC,MAAsB,GAAhBD,KAAKE,UAAgBF,KAAKC,MAAsB,GAAhBD,KAAKE,WACtDN,UAAW,EACXC,UAAU,EACVC,MAAO,IAER,kBAAM,EAAK0B,gB,oBAIb,WAEC,IAFS,IAAD,OACFM,EAAQ,GACLC,EAAI,EAAGA,EAAI,GAAIA,IACvB,IAAK,IAAIhC,EAAI,EAAGA,EAAI,GAAIA,IACvB+B,EAAME,KACL,cAAC,EAAD,CAAQ7C,KAAMY,EAAGX,KAAM2C,EAAG/C,GAAIF,KAAKa,MAAMX,GAAIK,IAAKP,KAAKa,MAAMN,OAIhE,OACC,sBAAKR,UAAU,OAAf,oBACSC,KAAKa,MAAMG,MACnB,uBAFD,eAGcQ,aAAaC,QAAQ,UAAYzB,KAAKa,MAAMG,MACzD,sBAAKjB,UAAU,SAAf,UACC,qBAAKA,UAAU,aAAf,SAA6BiD,IAC7B,yBACCG,KAAK,SACLpD,WACyB,IAAxBC,KAAKa,MAAME,SAAoB,cAAgB,aAEhDP,QAAS,kBAAM,EAAK4C,WALrB,UAOC,yCACA,mBAAGrD,UAAU,eAAb,2C,GA3OaU,cAmPnB4C,IAASC,OAAO,cAAC,EAAD,IAAUX,SAASY,eAAe,W","file":"static/js/main.930d0432.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Square extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tthis.props.on.some(\n\t\t\t\t\t\to => o.posX === this.props.posX && o.posY === this.props.posY\n\t\t\t\t\t)\n\t\t\t\t\t\t? 'dark'\n\t\t\t\t\t\t: this.props.red[0] === this.props.posX &&\n\t\t\t\t\t\t  this.props.red[1] === this.props.posY\n\t\t\t\t\t\t? 'red'\n\t\t\t\t\t\t: 'box'\n\t\t\t\t}\n\t\t\t\tonClick={this.props.onClick}\n\t\t\t></div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Square from './Square';\nimport './index.css';\n\nclass Game extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\n\t\tthis.state = {\n\t\t\ton: [\n\t\t\t\t{\n\t\t\t\t\tposX: 7,\n\t\t\t\t\tposY: 8,\n\t\t\t\t\tdirection: 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tposX: 7,\n\t\t\t\t\tposY: 7,\n\t\t\t\t\tdirection: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t\tred: [],\n\t\t\tdirection: 0,\n\t\t\tdisabled: false,\n\t\t\tscore: 0,\n\t\t};\n\t}\n\n\tgetRandomPos() {\n\t\tconst e = [Math.floor(Math.random() * 15), Math.floor(Math.random() * 15)];\n\t\tif (this.state.on.some(o => o.posX === e[0] && o.posY === e[1]))\n\t\t\treturn this.getRandomPos();\n\t\treturn e;\n\t}\n\n\thandleScoreChange() {\n\t\tthis.setState(prevState => ({\n\t\t\tscore: prevState.score + 1,\n\t\t}));\n\t\tif (\n\t\t\t!localStorage.getItem('score') ||\n\t\t\tlocalStorage.getItem('score') < this.state.score\n\t\t)\n\t\t\tlocalStorage.setItem('score', this.state.score);\n\t}\n\n\taddPos(x, y) {\n\t\tif (x === -1 || x === 15 || y === -1 || y === 15) {\n\t\t\treturn this.disable();\n\t\t}\n\t\tif (this.state.red[0] === x && this.state.red[1] === y) {\n\t\t\tthis.handleScoreChange();\n\t\t\treturn this.addPosFromOppDirection();\n\t\t}\n\t\tif (this.includes(x, y)) return this.disable();\n\t\tif (this.state.disabled === true) return;\n\t\tthis.setState(prevState => ({\n\t\t\ton: [\n\t\t\t\t...prevState.on,\n\t\t\t\t{ posX: x, posY: y, direction: this.state.direction },\n\t\t\t],\n\t\t}));\n\t}\n\n\taddOpPos(x, y) {\n\t\tif (x === -1 || x === 15 || y === -1 || y === 15) {\n\t\t\treturn this.disable();\n\t\t}\n\t\tthis.setState({\n\t\t\tred: [Math.floor(Math.random() * 15), Math.floor(Math.random() * 15)],\n\t\t});\n\t\tthis.setState(prevState => ({\n\t\t\ton: [\n\t\t\t\t{ posX: x, posY: y, direction: this.state.direction },\n\t\t\t\t...prevState.on,\n\t\t\t],\n\t\t}));\n\t\tthis.addPosFromDirection();\n\t}\n\n\tincludes(x, y) {\n\t\tif (this.state.on.some(e => e.posX === x && e.posY === y)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tdisable() {\n\t\tthis.setState({\n\t\t\tdisabled: true,\n\t\t});\n\t}\n\n\taddPosFromDirection() {\n\t\tconst x = this.state.on[this.state.on.length - 1];\n\t\tswitch (this.state.direction) {\n\t\t\tcase 0:\n\t\t\t\tthis.addPos(x.posX, x.posY - 1);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.addPos(x.posX + 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.addPos(x.posX, x.posY + 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.addPos(x.posX - 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn new Error('There is no direction in the state');\n\t\t}\n\t}\n\n\taddPosFromOppDirection() {\n\t\tconst x = this.state.on[0];\n\t\tswitch (x.direction) {\n\t\t\tcase 0:\n\t\t\t\tthis.addOpPos(x.posX, x.posY + 1);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.addOpPos(x.posX - 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.addOpPos(x.posX, x.posY - 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.addOpPos(x.posX + 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn new Error('There is no direction in the state');\n\t\t}\n\t}\n\n\tremoveOldestPos() {\n\t\tif (this.state.disabled === true) return;\n\t\tthis.setState(prevState => ({\n\t\t\ton: [...prevState.on.slice(1)],\n\t\t}));\n\t}\n\n\tchangeDirection(e) {\n\t\tthis.setState(prevState => ({\n\t\t\tdirection: (prevState.direction + e) % 4,\n\t\t}));\n\t}\n\n\thandleKeyDown(e) {\n\t\t// if (this.state.disabled === true) return;\n\t\tswitch (e.keyCode) {\n\t\t\tcase 37: // left / a\n\t\t\tcase 65:\n\t\t\t\tif (this.state.direction === 0 || this.state.direction === 2)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 0 ? 3 : 1);\n\t\t\t\tbreak;\n\t\t\tcase 38: // up / w\n\t\t\tcase 87:\n\t\t\t\tif (this.state.direction === 3 || this.state.direction === 1)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 3 ? 1 : 3);\n\t\t\t\tbreak;\n\t\t\tcase 39: // right / d\n\t\t\tcase 68:\n\t\t\t\tif (this.state.direction === 0 || this.state.direction === 2)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 0 ? 1 : 3);\n\t\t\t\tbreak;\n\t\t\tcase 40: // down / s\n\t\t\tcase 83:\n\t\t\t\tif (this.state.direction === 3 || this.state.direction === 1)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 3 ? 3 : 1);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tred: this.getRandomPos(),\n\t\t});\n\t\tsetTimeout(() => this.timeout(), 100);\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\n\t}\n\n\ttimeout() {\n\t\tif (this.state.disabled === true) return;\n\t\tthis.addPosFromDirection();\n\t\tthis.removeOldestPos();\n\t\tsetTimeout(() => this.timeout(), 120);\n\t}\n\n\trestart() {\n\t\tconsole.log('restarting');\n\t\tif (this.disabled === false) return;\n\t\tconsole.log(this.state);\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\ton: [\n\t\t\t\t\t{\n\t\t\t\t\t\tposX: 7,\n\t\t\t\t\t\tposY: 8,\n\t\t\t\t\t\tdirection: 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tposX: 7,\n\t\t\t\t\t\tposY: 7,\n\t\t\t\t\t\tdirection: 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tred: [Math.floor(Math.random() * 15), Math.floor(Math.random() * 15)],\n\t\t\t\tdirection: 0,\n\t\t\t\tdisabled: false,\n\t\t\t\tscore: 0,\n\t\t\t},\n\t\t\t() => this.timeout()\n\t\t);\n\t}\n\n\trender() {\n\t\tconst items = [];\n\t\tfor (let i = 0; i < 15; i++) {\n\t\t\tfor (let e = 0; e < 15; e++) {\n\t\t\t\titems.push(\n\t\t\t\t\t<Square posX={e} posY={i} on={this.state.on} red={this.state.red} />\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"game\">\n\t\t\t\tScore: {this.state.score}\n\t\t\t\t<br />\n\t\t\t\tHigh Score: {localStorage.getItem('score') || this.state.score}\n\t\t\t\t<div className=\"layout\">\n\t\t\t\t\t<div className=\"game-board\">{items}</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.state.disabled === true ? 'text-block1' : 'text-block'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => this.restart()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<p>You died</p>\n\t\t\t\t\t\t<p className=\"smaller-text\">Click to respawn</p>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nReactDOM.render(<Game />, document.getElementById('root'));\n"],"sourceRoot":""}
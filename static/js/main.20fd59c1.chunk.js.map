{"version":3,"sources":["Square.js","index.js"],"names":["Square","className","this","props","on","some","o","posX","posY","red","onClick","Component","Game","handleKeyDown","bind","state","direction","Math","floor","random","disabled","score","setState","prevState","localStorage","getItem","setItem","x","y","disable","handleScoreChange","addPosFromOppDirection","includes","addPosFromDirection","e","length","addPos","Error","addOpPos","slice","keyCode","changeDirection","setTimeout","timeout","document","addEventListener","removeOldestPos","items","i","push","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.20fd59c1.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nexport default class Square extends Component {\n  render() {\n    return (\n      <div\n        className={\n          this.props.on.some(\n            (o) => o.posX === this.props.posX && o.posY === this.props.posY\n          )\n            ? \"dark\"\n            : this.props.red[0] === this.props.posX &&\n              this.props.red[1] === this.props.posY\n            ? \"red\"\n            : \"box\"\n        }\n        onClick={this.props.onClick}\n      ></div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Square from \"./Square\";\nimport \"./index.css\";\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.state = {\n      on: [\n        {\n          posX: 4,\n          posY: 5,\n          direction: 0,\n        },\n        {\n          posX: 4,\n          posY: 4,\n          direction: 0,\n        },\n      ],\n      red: [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)],\n      direction: 0,\n      disabled: false,\n      score: 0,\n    };\n  }\n\n  handleScoreChange() {\n    this.setState((prevState) => ({\n      score: prevState.score + 1,\n    }));\n    if (\n      !localStorage.getItem(\"score\") ||\n      localStorage.getItem(\"score\") < this.state.score\n    )\n      localStorage.setItem(\"score\", this.state.score);\n  }\n\n  addPos(x, y) {\n    if (x === -1 || x === 9 || y === -1 || y === 9) {\n      return this.disable();\n    }\n    if (this.state.red[0] === x && this.state.red[1] === y) {\n      this.handleScoreChange();\n      return this.addPosFromOppDirection();\n    }\n    if (this.includes(x, y)) return this.disable();\n    if (this.state.disabled === true) return;\n    this.setState((prevState) => ({\n      on: [\n        ...prevState.on,\n        { posX: x, posY: y, direction: this.state.direction },\n      ],\n    }));\n  }\n\n  addOpPos(x, y) {\n    if (x === -1 || x === 9 || y === -1 || y === 9) {\n      return this.disable();\n    }\n    this.setState({\n      red: [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)],\n    });\n    this.setState((prevState) => ({\n      on: [\n        { posX: x, posY: y, direction: this.state.direction },\n        ...prevState.on,\n      ],\n    }));\n    this.addPosFromDirection();\n  }\n\n  includes(x, y) {\n    // this.props.on.some(\n    //   (o) => o.posX === this.props.posX && o.posY === this.props.posY\n    // )\n    if (this.state.on.some((e) => e.posX === x && e.posY === y)) {\n      return true;\n    }\n  }\n\n  disable() {\n    this.setState({\n      disabled: true,\n    });\n  }\n\n  addPosFromDirection() {\n    const x = this.state.on[this.state.on.length - 1];\n    switch (this.state.direction) {\n      case 0:\n        this.addPos(x.posX, x.posY - 1);\n        break;\n      case 1:\n        this.addPos(x.posX + 1, x.posY);\n        break;\n      case 2:\n        this.addPos(x.posX, x.posY + 1);\n        break;\n      case 3:\n        this.addPos(x.posX - 1, x.posY);\n        break;\n      default:\n        return new Error(\"There is no direction in the state\");\n    }\n  }\n\n  addPosFromOppDirection() {\n    const x = this.state.on[0];\n    switch (x.direction) {\n      case 0:\n        this.addOpPos(x.posX, x.posY + 1);\n        break;\n      case 1:\n        this.addOpPos(x.posX - 1, x.posY);\n        break;\n      case 2:\n        this.addOpPos(x.posX, x.posY - 1);\n        break;\n      case 3:\n        this.addOpPos(x.posX + 1, x.posY);\n        break;\n      default:\n        return new Error(\"There is no direction in the state\");\n    }\n  }\n\n  removeOldestPos() {\n    if (this.state.disabled === true) return;\n    this.setState((prevState) => ({\n      on: [...prevState.on.slice(1)],\n    }));\n  }\n\n  changeDirection(e) {\n    this.setState((prevState) => ({\n      direction: (prevState.direction + e) % 4,\n    }));\n  }\n\n  handleKeyDown(e) {\n    // if (this.state.disabled === true) return;\n    switch (e.keyCode) {\n      case 37: // left / a\n      case 65:\n        if (this.state.direction === 0 || this.state.direction === 2)\n          this.changeDirection(this.state.direction === 0 ? 3 : 1);\n        break;\n      case 38: // up / w\n      case 87:\n        if (this.state.direction === 3 || this.state.direction === 1)\n          this.changeDirection(this.state.direction === 3 ? 1 : 3);\n        break;\n      case 39: // right / d\n      case 68:\n        if (this.state.direction === 0 || this.state.direction === 2)\n          this.changeDirection(this.state.direction === 0 ? 1 : 3);\n        break;\n      case 40: // down / s\n      case 83:\n        if (this.state.direction === 3 || this.state.direction === 1)\n          this.changeDirection(this.state.direction === 3 ? 3 : 1);\n        break;\n      default:\n        return;\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.timeout(), 100);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  timeout() {\n    if (this.state.disabled === true) return;\n    this.addPosFromDirection();\n    this.removeOldestPos();\n    setTimeout(() => this.timeout(), 175);\n  }\n\n  render() {\n    const items = [];\n    for (let i = 0; i < 9; i++) {\n      for (let e = 0; e < 9; e++) {\n        items.push(\n          <Square posX={e} posY={i} on={this.state.on} red={this.state.red} />\n        );\n      }\n    }\n    return (\n      <div className=\"game\">\n        Score {this.state.score}\n        <br />\n        High Score {localStorage.getItem(\"score\") || this.state.score}\n        <div className=\"layout\">\n          <div className=\"game-board\">{items}</div>\n          <div\n            className={\n              this.state.disabled === true ? \"text-block1\" : \"text-block\"\n            }\n          >\n            <p>You died L</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Game />, document.getElementById(\"root\"));\n"],"sourceRoot":""}
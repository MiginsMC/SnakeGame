{"version":3,"sources":["Square.js","index.js"],"names":["Square","e","this","props","on","find","o","posX","posY","direction","undefined","className","red","onClick","Component","Game","handleKeyDown","bind","state","disabled","score","Math","floor","random","some","getRandomPos","setState","prevState","localStorage","getItem","setItem","x","y","disable","handleScoreChange","addPosFromOppDirection","includes","addPosFromDirection","length","addPos","Error","addOpPos","slice","keyCode","changeDirection","setTimeout","timeout","document","addEventListener","removeOldestPos","console","log","items","i","push","type","restart","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.127ebe51.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Square extends Component {\n\trender() {\n\t\tlet e = this.props.on.find(\n\t\t\to => o.posX === this.props.posX && o.posY === this.props.posY\n\t\t);\n\t\tif (e) {\n\t\t\te = e.direction;\n\t\t} else {\n\t\t\te = undefined;\n\t\t}\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\tthis.props.red[0] === this.props.posX &&\n\t\t\t\t\tthis.props.red[1] === this.props.posY\n\t\t\t\t\t\t? 'red'\n\t\t\t\t\t\t: e\n\t\t\t\t\t\t? ''\n\t\t\t\t\t\t: 'box'\n\t\t\t\t} ${e === 0 || e === 2 ? 'dark-north' : ''} ${\n\t\t\t\t\te === 1 || e === 3 ? 'dark-east' : ''\n\t\t\t\t}`}\n\t\t\t\tonClick={this.props.onClick}\n\t\t\t></div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Square from './Square';\nimport './index.css';\n\nclass Game extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\n\t\tthis.state = {\n\t\t\ton: [\n\t\t\t\t{\n\t\t\t\t\tposX: 7,\n\t\t\t\t\tposY: 8,\n\t\t\t\t\tdirection: 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tposX: 7,\n\t\t\t\t\tposY: 7,\n\t\t\t\t\tdirection: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t\tred: [],\n\t\t\tdirection: 0,\n\t\t\tdisabled: false,\n\t\t\tscore: 0,\n\t\t};\n\t}\n\n\tgetRandomPos() {\n\t\tconst e = [Math.floor(Math.random() * 15), Math.floor(Math.random() * 15)];\n\t\tif (this.state.on.some(o => o.posX === e[0] && o.posY === e[1]))\n\t\t\treturn this.getRandomPos();\n\t\treturn e;\n\t}\n\n\thandleScoreChange() {\n\t\tthis.setState(prevState => ({\n\t\t\tscore: prevState.score + 1,\n\t\t}));\n\t\tif (\n\t\t\t!localStorage.getItem('score') ||\n\t\t\tlocalStorage.getItem('score') < this.state.score\n\t\t)\n\t\t\tlocalStorage.setItem('score', this.state.score);\n\t}\n\n\taddPos(x, y) {\n\t\tif (x === -1 || x === 15 || y === -1 || y === 15) {\n\t\t\treturn this.disable();\n\t\t}\n\t\tif (this.state.red[0] === x && this.state.red[1] === y) {\n\t\t\tthis.handleScoreChange();\n\t\t\treturn this.addPosFromOppDirection();\n\t\t}\n\t\tif (this.includes(x, y)) return this.disable();\n\t\tif (this.state.disabled === true) return;\n\t\tthis.setState(prevState => ({\n\t\t\ton: [\n\t\t\t\t...prevState.on,\n\t\t\t\t{ posX: x, posY: y, direction: this.state.direction },\n\t\t\t],\n\t\t}));\n\t}\n\n\taddOpPos(x, y) {\n\t\tif (x === -1 || x === 15 || y === -1 || y === 15) {\n\t\t\treturn this.disable();\n\t\t}\n\t\tthis.setState({\n\t\t\tred: [Math.floor(Math.random() * 15), Math.floor(Math.random() * 15)],\n\t\t});\n\t\tthis.setState(prevState => ({\n\t\t\ton: [\n\t\t\t\t{ posX: x, posY: y, direction: this.state.direction },\n\t\t\t\t...prevState.on,\n\t\t\t],\n\t\t}));\n\t\tthis.addPosFromDirection();\n\t}\n\n\tincludes(x, y) {\n\t\tif (this.state.on.some(e => e.posX === x && e.posY === y)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tdisable() {\n\t\tthis.setState({\n\t\t\tdisabled: true,\n\t\t});\n\t}\n\n\taddPosFromDirection() {\n\t\tconst x = this.state.on[this.state.on.length - 1];\n\t\tswitch (this.state.direction) {\n\t\t\tcase 0:\n\t\t\t\tthis.addPos(x.posX, x.posY - 1);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.addPos(x.posX + 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.addPos(x.posX, x.posY + 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.addPos(x.posX - 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn new Error('There is no direction in the state');\n\t\t}\n\t}\n\n\taddPosFromOppDirection() {\n\t\tconst x = this.state.on[0];\n\t\tswitch (x.direction) {\n\t\t\tcase 0:\n\t\t\t\tthis.addOpPos(x.posX, x.posY + 1);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.addOpPos(x.posX - 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.addOpPos(x.posX, x.posY - 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.addOpPos(x.posX + 1, x.posY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn new Error('There is no direction in the state');\n\t\t}\n\t}\n\n\tremoveOldestPos() {\n\t\tif (this.state.disabled === true) return;\n\t\tthis.setState(prevState => ({\n\t\t\ton: [...prevState.on.slice(1)],\n\t\t}));\n\t}\n\n\tchangeDirection(e) {\n\t\tthis.setState(prevState => ({\n\t\t\tdirection: (prevState.direction + e) % 4,\n\t\t}));\n\t}\n\n\thandleKeyDown(e) {\n\t\t// if (this.state.disabled === true) return;\n\t\tswitch (e.keyCode) {\n\t\t\tcase 37: // left / a\n\t\t\tcase 65:\n\t\t\t\tif (this.state.direction === 0 || this.state.direction === 2)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 0 ? 3 : 1);\n\t\t\t\tbreak;\n\t\t\tcase 38: // up / w\n\t\t\tcase 87:\n\t\t\t\tif (this.state.direction === 3 || this.state.direction === 1)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 3 ? 1 : 3);\n\t\t\t\tbreak;\n\t\t\tcase 39: // right / d\n\t\t\tcase 68:\n\t\t\t\tif (this.state.direction === 0 || this.state.direction === 2)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 0 ? 1 : 3);\n\t\t\t\tbreak;\n\t\t\tcase 40: // down / s\n\t\t\tcase 83:\n\t\t\t\tif (this.state.direction === 3 || this.state.direction === 1)\n\t\t\t\t\tthis.changeDirection(this.state.direction === 3 ? 3 : 1);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tred: this.getRandomPos(),\n\t\t});\n\t\tsetTimeout(() => this.timeout(), 100);\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\n\t}\n\n\ttimeout() {\n\t\tif (this.state.disabled === true) return;\n\t\tthis.addPosFromDirection();\n\t\tthis.removeOldestPos();\n\t\tsetTimeout(() => this.timeout(), 120);\n\t}\n\n\trestart() {\n\t\tconsole.log('restarting');\n\t\tif (this.disabled === false) return;\n\t\tconsole.log(this.state);\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\ton: [\n\t\t\t\t\t{\n\t\t\t\t\t\tposX: 7,\n\t\t\t\t\t\tposY: 8,\n\t\t\t\t\t\tdirection: 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tposX: 7,\n\t\t\t\t\t\tposY: 7,\n\t\t\t\t\t\tdirection: 0,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tred: [Math.floor(Math.random() * 15), Math.floor(Math.random() * 15)],\n\t\t\t\tdirection: 0,\n\t\t\t\tdisabled: false,\n\t\t\t\tscore: 0,\n\t\t\t},\n\t\t\t() => this.timeout()\n\t\t);\n\t}\n\n\trender() {\n\t\tconst items = [];\n\t\tfor (let i = 0; i < 15; i++) {\n\t\t\tfor (let e = 0; e < 15; e++) {\n\t\t\t\titems.push(\n\t\t\t\t\t<Square posX={e} posY={i} on={this.state.on} red={this.state.red} />\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"game\">\n\t\t\t\tScore: {this.state.score}\n\t\t\t\t<br />\n\t\t\t\tHigh Score: {localStorage.getItem('score') || this.state.score}\n\t\t\t\t<div className=\"layout\">\n\t\t\t\t\t<div className=\"game-board\">{items}</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.state.disabled === true ? 'text-block1' : 'text-block'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => this.restart()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<p>You died</p>\n\t\t\t\t\t\t<p className=\"smaller-text\">Click to respawn</p>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nReactDOM.render(<Game />, document.getElementById('root'));\n"],"sourceRoot":""}
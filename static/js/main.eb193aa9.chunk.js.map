{"version":3,"sources":["Square.js","index.js"],"names":["Square","className","this","props","on","some","o","posX","posY","red","onClick","Component","Game","handleKeyDown","bind","state","direction","disabled","score","e","Math","floor","random","getRandomPos","setState","prevState","localStorage","getItem","setItem","x","y","disable","handleScoreChange","addPosFromOppDirection","includes","addPosFromDirection","length","addPos","Error","addOpPos","slice","keyCode","changeDirection","setTimeout","timeout","document","addEventListener","removeOldestPos","console","log","items","i","push","type","restart","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.eb193aa9.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nexport default class Square extends Component {\n  render() {\n    return (\n      <div\n        className={\n          this.props.on.some(\n            (o) => o.posX === this.props.posX && o.posY === this.props.posY\n          )\n            ? \"dark\"\n            : this.props.red[0] === this.props.posX &&\n              this.props.red[1] === this.props.posY\n            ? \"red\"\n            : \"box\"\n        }\n        onClick={this.props.onClick}\n      ></div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Square from \"./Square\";\nimport \"./index.css\";\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.state = {\n      on: [\n        {\n          posX: 4,\n          posY: 5,\n          direction: 0,\n        },\n        {\n          posX: 4,\n          posY: 4,\n          direction: 0,\n        },\n      ],\n      red: [],\n      direction: 0,\n      disabled: false,\n      score: 0,\n    };\n  }\n\n  getRandomPos() {\n    const e = [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)];\n    if (this.state.on.some((o) => o.posX === e[0] && o.posY === e[1])) return this.getRandomPos();\n    return e;\n  }\n\n  handleScoreChange() {\n    this.setState((prevState) => ({\n      score: prevState.score + 1,\n    }));\n    if (\n      !localStorage.getItem(\"score\") ||\n      localStorage.getItem(\"score\") < this.state.score\n    )\n      localStorage.setItem(\"score\", this.state.score);\n  }\n\n  addPos(x, y) {\n    if (x === -1 || x === 9 || y === -1 || y === 9) {\n      return this.disable();\n    }\n    if (this.state.red[0] === x && this.state.red[1] === y) {\n      this.handleScoreChange();\n      return this.addPosFromOppDirection();\n    }\n    if (this.includes(x, y)) return this.disable();\n    if (this.state.disabled === true) return;\n    this.setState((prevState) => ({\n      on: [\n        ...prevState.on,\n        { posX: x, posY: y, direction: this.state.direction },\n      ],\n    }));\n  }\n\n  addOpPos(x, y) {\n    if (x === -1 || x === 9 || y === -1 || y === 9) {\n      return this.disable();\n    }\n    this.setState({\n      red: [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)],\n    });\n    this.setState((prevState) => ({\n      on: [\n        { posX: x, posY: y, direction: this.state.direction },\n        ...prevState.on,\n      ],\n    }));\n    this.addPosFromDirection();\n  }\n\n  includes(x, y) {\n    if (this.state.on.some((e) => e.posX === x && e.posY === y)) {\n      return true;\n    }\n  }\n\n  disable() {\n    this.setState({\n      disabled: true,\n    });\n  }\n\n  addPosFromDirection() {\n    const x = this.state.on[this.state.on.length - 1];\n    switch (this.state.direction) {\n      case 0:\n        this.addPos(x.posX, x.posY - 1);\n        break;\n      case 1:\n        this.addPos(x.posX + 1, x.posY);\n        break;\n      case 2:\n        this.addPos(x.posX, x.posY + 1);\n        break;\n      case 3:\n        this.addPos(x.posX - 1, x.posY);\n        break;\n      default:\n        return new Error(\"There is no direction in the state\");\n    }\n  }\n\n  addPosFromOppDirection() {\n    const x = this.state.on[0];\n    switch (x.direction) {\n      case 0:\n        this.addOpPos(x.posX, x.posY + 1);\n        break;\n      case 1:\n        this.addOpPos(x.posX - 1, x.posY);\n        break;\n      case 2:\n        this.addOpPos(x.posX, x.posY - 1);\n        break;\n      case 3:\n        this.addOpPos(x.posX + 1, x.posY);\n        break;\n      default:\n        return new Error(\"There is no direction in the state\");\n    }\n  }\n\n  removeOldestPos() {\n    if (this.state.disabled === true) return;\n    this.setState((prevState) => ({\n      on: [...prevState.on.slice(1)],\n    }));\n  }\n\n  changeDirection(e) {\n    this.setState((prevState) => ({\n      direction: (prevState.direction + e) % 4,\n    }));\n  }\n\n  handleKeyDown(e) {\n    // if (this.state.disabled === true) return;\n    switch (e.keyCode) {\n      case 37: // left / a\n      case 65:\n        if (this.state.direction === 0 || this.state.direction === 2)\n          this.changeDirection(this.state.direction === 0 ? 3 : 1);\n        break;\n      case 38: // up / w\n      case 87:\n        if (this.state.direction === 3 || this.state.direction === 1)\n          this.changeDirection(this.state.direction === 3 ? 1 : 3);\n        break;\n      case 39: // right / d\n      case 68:\n        if (this.state.direction === 0 || this.state.direction === 2)\n          this.changeDirection(this.state.direction === 0 ? 1 : 3);\n        break;\n      case 40: // down / s\n      case 83:\n        if (this.state.direction === 3 || this.state.direction === 1)\n          this.changeDirection(this.state.direction === 3 ? 3 : 1);\n        break;\n      default:\n        return;\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      red: this.getRandomPos(),\n    })\n    setTimeout(() => this.timeout(), 100);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  timeout() {\n    if (this.state.disabled === true) return;\n    this.addPosFromDirection();\n    this.removeOldestPos();\n    setTimeout(() => this.timeout(), 175);\n  }\n\n  restart() {\n    console.log(\"restarting\")\n    if (this.disabled === false) return;\n    console.log(this.state);\n    this.setState({\n      on: [\n        {\n          posX: 4,\n          posY: 5,\n          direction: 0,\n        },\n        {\n          posX: 4,\n          posY: 4,\n          direction: 0,\n        },\n      ],\n      red: [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)],\n      direction: 0,\n      disabled: false,\n      score: 0,\n    }, () => this.timeout());\n  }\n\n  render() {\n    const items = [];\n    for (let i = 0; i < 9; i++) {\n      for (let e = 0; e < 9; e++) {\n        items.push(\n          <Square posX={e} posY={i} on={this.state.on} red={this.state.red} />\n        );\n      }\n    }\n    return (\n      <div className=\"game\">\n        Score: {this.state.score}\n        <br />\n        High Score: {localStorage.getItem(\"score\") || this.state.score}\n        <div className=\"layout\">\n          <div className=\"game-board\">{items}</div>\n          <button type=\"button\"\n            className={\n              this.state.disabled === true ? \"text-block1\" : \"text-block\"\n            }\n            onClick={ () => this.restart()}\n          >\n            <p>You died L</p>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Game />, document.getElementById(\"root\"));\n"],"sourceRoot":""}